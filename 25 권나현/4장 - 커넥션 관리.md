# 4장: 커넥션 관리

---

## TCP 커넥션

* HTTP는 **TCP(Transmission Control Protocol)** 위에서 동작.
* 신뢰성 있는 통신 제공: 순서에 맞게 정확히 전달
* TCP 스트림은 세그먼트로 나뉘어 IP 패킷을 통해 전송됨.
* 각 세그먼트는 하나의 IP 주소에서 다른 IP 주소로 IP 패킷(IP 패킷 헤더, TCP 세그먼트 헤더, TCP 데이터 조각)에 담겨 전달됨
* TCP는 포트 번호를 통해 여러 개의 커넥션 유지
* TCP 커넥션 식별: <발신지 IP 주소, 발신지 포트, 수신지 IP 주소, 수신지 포트>
* HTTP 요청 전 반드시 **TCP 3-way 핸드셰이크**를 수행해야 함.
* TCP는 스트림 기반 → 메시지 구분은 HTTP가 직접 해야 함 (예: `Content-Length`).

---

## TCP 성능에 대한 고려

* **HTTP 트랜잭션 지연 원인**
  IP주소, 포트번호  
  커넥션 설정 시간  
  요청 메시지의 전달과 처리  
  웹 서버의 응답 전달  

* **성능 관련 중요 요소**
  TCP 커넥션의 핸드셰이크 설정  
  TCP의 느린 시작  
  네이글 알고리즘  
  확인응답 지연 알고리즘  
  TIME_WAIT 지연과 포트 고갈  

  ---

## HTTP 커넥션 관리

* **HTTP 커넥션의 성능 향상 기술**  
  병렬 커넥션: 여러 개의 TCP 커넥션을 통한 동시 HTTP 요청  
  지속 커넥션: 커넥션을 맺고 끊는 데서 발생하는 지연을 제거하기 위한 TCP 커넥션의 재활용  
  파이프라인 커넥션: 공유 TCP 커넥션을 통한 병렬 HTTP 요청  
  다중 커넥션: 요청과 응답들엥 대한 중재(실험적  기술)  

